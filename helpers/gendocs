#!/bin/bash
source venv/bin/activate
set -e

# echo converting notebooks
# for nb in docs/*.ipynb; do
#     jupyter nbconvert --to markdown $nb
# done

echo generating documentation
verb() {
    echo
    echo '```'
}
endverb() {
    echo '```'
    echo
}

(
cat <<EOF
Documentation as generated by 'pydoc3' (default Python documentation
viewer). You can view this at the command line by typing
'pydoc3 tarproclib...'.
EOF
for mod in tarproclib/*.py; do
    base=$(basename $mod .py)
    full=tarproclib.$base
    echo "# module \`$full\`"
    verb
    pydoc3 $full
    endverb
done
) > docs/pydoc.md

progs="tar2tsv tarcats tarfirst tarmix tarpcat tarproc tarshow tarsort tarsplit tsv2tar"

(
cat <<EOF
Usage information for command line programs.
EOF
for command in $progs; do
    echo "# $command (command)"
    verb
    ./$command --help
    endverb
done
) > docs/commands.md
